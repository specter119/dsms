version: 1.83.0-ba36ae4dcca57ba64a9b61e5f4eca88b6e0bc4db
description: Visual Studio Code is a lightweight but powerful source code editor (Insiders Edition).
homepage: https://code.visualstudio.com/
license:
  identifier: Freeware
  url: https://code.visualstudio.com/License/
notes: |
  Add Visual Studio Code as a context menu option by running:
  reg import "$dir\install-context.reg"
  For file associations, run:'
  reg import "$dir\install-associations.reg"
architecture:
  64bit:
    url: https://update.code.visualstudio.com/latest/win32-x64-archive/insider#/dl.7z
    hash: 6eac942081a3a19c5f7cede5177f45d97901d8b792297302f00c605591d7c7c5
  32bit:
    url: https://update.code.visualstudio.com/latest/win32-archive/insider#/dl.7z
    hash: f1af5a6e569866aec6296435bf4d48b446ac2e4f2fe78e5f685d228d6807e20b
  arm64:
    url: https://update.code.visualstudio.com/latest/win32-arm64-archive/insider#/dl.7z
    hash: a6d3b23f45f549f6f7b753d1f9a2da40e176aad8b5ee094011e2acd9a4317e25
post_install: |
  $dirpath = "$dir".Replace('\', '\\')
  $exepath = "$dir\Code - Insiders.exe".Replace('\', '\\')
  'install-associations', 'uninstall-associations', 'install-context', 'uninstall-context' | ForEach-Object {
    if (Test-Path "$bucketsdir\extras\scripts\vscode\$_.reg") {
      $content = Get-Content "$bucketsdir\extras\scripts\vscode\$_.reg"
      $content = $content.Replace('$codedir', $dirpath)
      $content = $content.Replace('$code', $exepath)
      $content = $content.Replace('&Code', 'Code &Insiders')
      if ($global) {
        $content = $content.Replace('HKEY_CURRENT_USER', 'HKEY_LOCAL_MACHINE')
      }
      $content | Set-Content -Path "$dir\$_.reg"
    }
  }
bin:
- bin\code-insiders.cmd
- bin\code-tunnel-insiders.exe
shortcuts:
- - Code - Insiders.exe
  - Visual Studio Code - Insiders
uninstaller:
  script: if ($cmd -eq 'uninstall') { reg import "$dir\uninstall-context.reg" }
checkver:
  url: https://update.code.visualstudio.com/api/update/win32-x64-archive/insider/latest
  jsonpath: $.url
  regex: insider/([a-f\d]+)/VSCode-win32-x64-([.\d]+)-insider.zip
  replace: ${2}-${1}
autoupdate:
  architecture:
    64bit:
      url: https://update.code.visualstudio.com/latest/win32-x64-archive/insider#/dl.7z
      hash:
        url: https://update.code.visualstudio.com/api/update/win32-x64-archive/insider/latest
        jsonpath: $.sha256hash
    32bit:
      url: https://update.code.visualstudio.com/latest/win32-archive/insider#/dl.7z
      hash:
        url: https://update.code.visualstudio.com/api/update/win32-archive/insider/latest
        jsonpath: $.sha256hash
    arm64:
      url: https://update.code.visualstudio.com/latest/win32-arm64-archive/insider#/dl.7z
      hash:
        url: https://update.code.visualstudio.com/api/update/win32-arm64-archive/insider/latest
        jsonpath: $.sha256hash
